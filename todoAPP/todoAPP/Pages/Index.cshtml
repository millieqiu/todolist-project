@page
@model IndexModel
@{
  ViewData["Title"] = "Index";
  Layout = "_Layout";
}

@section Styles {
  <link rel="stylesheet" href="~/dist/css/index.css" asp-append-version="true" />
}

@section Scripts {
  <script type="module" src="~/dist/js/index.js" asp-append-version="true"></script>
}

<div class="main p-3">
  <div class="main-sidebar flex flex-col me-3">
    <base-sidebar></base-sidebar>
  </div>
  <div class="main-content p-2">
    <div class="flex-1">
      <table class="table table-todo">
        <tr class="hover" v-for="(item, index) in fakeTodoList.filter((x) => !x.isComplete)">
          <td class="text-center border-l-4 border-indigo-500 w-8">
            <label>
              <input type="checkbox" class="checkbox" :checked="item.isComplete" />
            </label>
          </td>
          <td>
            <div class="flex items-center gap-3">
              <div>
                <p class="font-base" :class="{ 'todo-complete': item.isComplete }">{{ item.title }}</p>
                <div class="text-sm opacity-50 flex items-center gap-1">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round"
                      d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5" />
                  </svg>
                  <span>{{ item.time }}</span>
                </div>
              </div>
            </div>
          </td>
          <td class="text-center w-32">
            <button class="btn btn-ghost btn-xs" @@click="openModalShowTodoNote(item.note)"
              :disabled="!item.note">查看備註</button>
          </td>
          <td class="text-center w-8">
            <div class="dropdown dropdown-bottom dropdown-end">
              <button role="button" class="btn btn-circle btn-xs">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                  stroke="currentColor" class="w-5 h-5">
                  <path stroke-linecap="round" stroke-linejoin="round"
                    d="M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z" />
                </svg>
              </button>
              <ul class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">
                <li>
                  <button @@click="openModalEditTodoItem(item)">
                    <a>編輯項目</a>
                  </button>
                </li>
                <li class=dropdown-delete><a>刪除</a></li>
              </ul>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
      <div class="flex flex-col w-full border-opacity-50 mt-4 mb-2">
        <div class="flex items-center">
          <span class="text-sm">已完成 (1)</span>
          <div class="ml-auto">
            <!-- NOTE: 一鍵刪除已完成的待辦事項 -->
            <button class="btn btn-sm btn-link no-underline">清除</button>
            <span class="text-primary">•</span>
            <!-- NOTE: 隱藏 or 開啟已完成列表 -->
            <button class="btn btn-sm btn-link no-underline">隱藏</button>
          </div>
        </div>
        <div class="divider my-0"></div>
      </div>
      <table class="table table-todo">
        <tr class="hover" v-for="(item, index) in fakeTodoList.filter((x) => x.isComplete)">
          <td class="text-center border-l-4 border-indigo-500 w-8">
            <label>
              <input type="checkbox" class="checkbox" :checked="item.isComplete" />
            </label>
          </td>
          <td>
            <div class="flex items-center gap-3">
              <div>
                <p class="font-base" :class="{ 'todo-complete': item.isComplete }">{{ item.title }}</p>
                <div class="text-sm opacity-50 flex items-center gap-1">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round"
                      d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5" />
                  </svg>
                  <span>{{ item.time }}</span>
                </div>
              </div>
            </div>
          </td>
          <td class="text-center w-32">
            <button class="btn btn-ghost btn-xs" @@click="openModalShowTodoNote(item.note)"
              :disabled="!item.note">查看備註</button>
          </td>
          <td class="text-center w-8">
            <div class="dropdown dropdown-bottom dropdown-end">
              <button role="button" class="btn btn-circle btn-xs">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                  stroke="currentColor" class="w-5 h-5">
                  <path stroke-linecap="round" stroke-linejoin="round"
                    d="M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z" />
                </svg>
              </button>
              <ul class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">
                <li>
                  <button @@click="openModalEditTodoItem(item)">
                    <a>編輯項目</a>
                  </button>
                </li>
                <li class=dropdown-delete><a>刪除</a></li>
              </ul>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<modal-edit-todo-item ref="modalEditTodoItem"></modal-edit-todo-item>
<modal-show-todo-note ref="modalShowTodoNote"></modal-show-todo-note>